"""
–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Ç–µ—Å—Ç–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö –¥–ª—è BrandPulse –ø—Ä–æ –±—Ä–µ–Ω–¥ Zara
–û–ù–û–í–õ–ï–ù–û: –¥–æ–¥–∞–Ω–æ –ø—ñ–¥—Ç—Ä–∏–º–∫—É –º–∞—Å–∏–≤—É –∫–∞—Ç–µ–≥–æ—Ä—ñ–π —Ç–∞ severity
"""
import sys
import os
sys.path.append(os.path.dirname(os.path.dirname(os.path.abspath(__file__))))

from datetime import datetime, timedelta
import random
from app.database import db_manager
from app.models import Platform, Sentiment

# –¢–µ—Å—Ç–æ–≤—ñ –¥–∞–Ω—ñ –ø—Ä–æ Zara (—Ç–µ–∫—Å—Ç, –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó[], —Ä–µ–π—Ç–∏–Ω–≥, severity)
ZARA_COMMENTS = {
    "positive": [
        ("–ß—É–¥–æ–≤–∞ —è–∫—ñ—Å—Ç—å –æ–¥—è–≥—É –≤—ñ–¥ Zara! –ó–∞–≤–∂–¥–∏ –∑–Ω–∞—Ö–æ–¥–∂—É —â–æ—Å—å —Å—Ç–∏–ª—å–Ω–µ", ["—è–∫—ñ—Å—Ç—å", "–ø—Ä–æ–¥—É–∫—Ç"], 5.0, "low"),
        ("–ù–æ–≤–∞ –∫–æ–ª–µ–∫—Ü—ñ—è Zara –ø—Ä–æ—Å—Ç–æ –≤–æ–≥–æ–Ω—å üî• –ö—É–ø–∏–ª–∞ –≤–∂–µ —Ç—Ä–∏ —Ä–µ—á—ñ", ["–ø—Ä–æ–¥—É–∫—Ç", "–¥–∏–∑–∞–π–Ω"], 5.0, "low"),
        ("–î—É–∂–µ —à–≤–∏–¥–∫–∞ –¥–æ—Å—Ç–∞–≤–∫–∞, –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–∏–π—à–ª–æ –∑–∞ 2 –¥–Ω—ñ!", ["–¥–æ—Å—Ç–∞–≤–∫–∞"], 5.0, "low"),
        ("Zara –º–∞—î –Ω–∞–π–∫—Ä–∞—â—ñ –±–∞–∑–æ–≤—ñ —Ä–µ—á—ñ –∑–∞ –∞–¥–µ–∫–≤–∞—Ç–Ω—É —Ü—ñ–Ω—É", ["—Ü—ñ–Ω–∞", "—è–∫—ñ—Å—Ç—å"], 4.5, "low"),
        ("–û–±–æ–∂–Ω—é—é Zara! –á—Ö–Ω—ñ –¥–∂–∏–Ω—Å–∏ —ñ–¥–µ–∞–ª—å–Ω–æ —Å–∏–¥—è—Ç—å", ["–ø—Ä–æ–¥—É–∫—Ç", "—Ä–æ–∑–º—ñ—Ä"], 5.0, "low"),
        ("–í—ñ–¥–º—ñ–Ω–Ω–µ –æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è –≤ –º–∞–≥–∞–∑–∏–Ω—ñ, –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç–∏ –¥—É–∂–µ –¥–æ–ø–æ–º–æ–≥–ª–∏", ["–ø—ñ–¥—Ç—Ä–∏–º–∫–∞", "—Å–µ—Ä–≤—ñ—Å"], 4.5, "low"),
        ("–ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è —Ç–æ–≤–∞—Ä—É –ø—Ä–æ–π—à–ª–æ –±–µ–∑ –ø—Ä–æ–±–ª–µ–º, –¥—è–∫—É—é Zara", ["–ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è"], 4.0, "low"),
        ("–ü—Ä–∏—î–º–Ω—ñ —Ü—ñ–Ω–∏ –ø—ñ–¥ —á–∞—Å —Ä–æ–∑–ø—Ä–æ–¥–∞–∂—É, –≤–∑—è–ª–∞ –ø–∞–ª—å—Ç–æ –∑—ñ –∑–Ω–∏–∂–∫–æ—é 50%", ["—Ü—ñ–Ω–∞", "–∞–∫—Ü—ñ—ó"], 5.0, "low"),
        ("–î–æ–¥–∞—Ç–æ–∫ Zara –¥—É–∂–µ –∑—Ä—É—á–Ω–∏–π, –ª–µ–≥–∫–æ —à—É–∫–∞—Ç–∏ —Ç–æ–≤–∞—Ä–∏", ["–¥–æ–¥–∞—Ç–æ–∫", "—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å"], 4.0, "low"),
        ("–Ø–∫—ñ—Å—Ç—å —Ç–∫–∞–Ω–∏–Ω –≤—Ä–∞–∂–∞—î –∑–∞ —Ç–∞–∫—É —Ü—ñ–Ω—É, —Ä–µ–∫–æ–º–µ–Ω–¥—É—é!", ["—è–∫—ñ—Å—Ç—å", "—Ü—ñ–Ω–∞"], 5.0, "low"),
    ],
    "neutral": [
        ("Zara –Ω–µ–ø–æ–≥–∞–Ω–∞, –∞–ª–µ —è–∫—ñ—Å—Ç—å —ñ–Ω–æ–¥—ñ –±—É–≤–∞—î —Ä—ñ–∑–Ω–æ—é", ["—è–∫—ñ—Å—Ç—å"], 3.0, "medium"),
        ("–ó–∞–º–æ–≤–∏–ª–∞ —Å—É–∫–Ω—é –∑ Zara, —Ä–æ–∑–º—ñ—Ä –ø—ñ–¥—ñ–π—à–æ–≤", ["—Ä–æ–∑–º—ñ—Ä"], 3.5, "low"),
        ("–í –º–∞–≥–∞–∑–∏–Ω—ñ Zara –≤–µ–ª–∏–∫–∏–π –∞—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç, –∞–ª–µ –Ω–µ –∑–∞–≤–∂–¥–∏ –º—ñ–π —Ä–æ–∑–º—ñ—Ä", ["–∞—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç", "—Ä–æ–∑–º—ñ—Ä"], 3.0, "medium"),
        ("–¶—ñ–Ω–∏ –≤ Zara —Å–µ—Ä–µ–¥–Ω—ñ, —î –π –¥–µ—à–µ–≤—à–µ –≤–∞—Ä—ñ–∞–Ω—Ç–∏", ["—Ü—ñ–Ω–∞"], 3.0, "low"),
        ("–î–æ—Å—Ç–∞–≤–∫–∞ –∑–∞–π–Ω—è–ª–∞ —Ç–∏–∂–¥–µ–Ω—å, –æ—á—ñ–∫—É–≤–∞–ª–∞ —à–≤–∏–¥—à–µ", ["–¥–æ—Å—Ç–∞–≤–∫–∞"], 3.0, "medium"),
        ("Zara –Ω–æ—Ä–º–∞–ª—å–Ω–∏–π –±—Ä–µ–Ω–¥ –¥–ª—è –±–∞–∑–æ–≤–æ–≥–æ –≥–∞—Ä–¥–µ—Ä–æ–±—É", ["–∑–∞–≥–∞–ª—å–Ω–µ"], 3.5, "low"),
        ("–Ø–∫—ñ—Å—Ç—å —è–∫ —ñ —Å–∫—Ä—ñ–∑—å –≤ –º–∞—Å–º–∞—Ä–∫–µ—Ç—ñ, –Ω—ñ—á–æ–≥–æ –æ—Å–æ–±–ª–∏–≤–æ–≥–æ", ["—è–∫—ñ—Å—Ç—å"], 3.0, "low"),
        ("–î–æ–¥–∞—Ç–æ–∫ Zara –ø—Ä–∞—Ü—é—î, –∞–ª–µ —Ö–æ—Ç—ñ–ª–æ—Å—è –± –±—ñ–ª—å—à–µ —Ñ—ñ–ª—å—Ç—Ä—ñ–≤", ["–¥–æ–¥–∞—Ç–æ–∫", "—Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å"], 3.0, "medium"),
    ],
    "negative": [
        ("–î–æ–¥–∞—Ç–æ–∫ Zara –ø–æ—Å—Ç—ñ–π–Ω–æ –≤–∏–ª—ñ—Ç–∞—î –ø—Ä–∏ –æ–ø–ª–∞—Ç—ñ! –í–∂–µ –≤—Ç—Ä–µ—Ç—î –Ω–∞–º–∞–≥–∞—é—Å—è", ["–æ–ø–ª–∞—Ç–∞", "–∫—Ä–∞—à", "–¥–æ–¥–∞—Ç–æ–∫"], 1.0, "critical"),
        ("–ó–∞–º–æ–≤–ª–µ–Ω–Ω—è –Ω–µ –ø—Ä–∏–π—à–ª–æ –≤—á–∞—Å–Ω–æ, –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ –Ω–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î", ["–¥–æ—Å—Ç–∞–≤–∫–∞", "–ø—ñ–¥—Ç—Ä–∏–º–∫–∞"], 1.5, "high"),
        ("–Ø–∫—ñ—Å—Ç—å —Ä–µ—á–µ–π –∑ Zara —Å–∏–ª—å–Ω–æ –≤–ø–∞–ª–∞ –æ—Å—Ç–∞–Ω–Ω—ñ–º —á–∞—Å–æ–º", ["—è–∫—ñ—Å—Ç—å"], 2.0, "medium"),
        ("–ù–µ –º–æ–∂—É –æ–ø–ª–∞—Ç–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –≤ –¥–æ–¥–∞—Ç–∫—É Zara, –ø–∏—à–µ –ø–æ–º–∏–ª–∫—É", ["–æ–ø–ª–∞—Ç–∞", "–¥–æ–¥–∞—Ç–æ–∫"], 1.0, "critical"),
        ("–ó—Ä–æ–±–∏–ª–∞ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è, –∞–ª–µ –≤–æ–Ω–æ –∑–∞–≥—É–±–∏–ª–æ—Å—è. –ì—Ä–æ—à—ñ —Å–ø–∏—Å–∞–ª–∏!", ["–∑–∞–º–æ–≤–ª–µ–Ω–Ω—è", "–æ–ø–ª–∞—Ç–∞"], 1.0, "critical"),
        ("–†–æ–∑–º—ñ—Ä–∏ –≤ Zara –≤–∑–∞–≥–∞–ª—ñ –Ω–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—é—Ç—å –¥—ñ–π—Å–Ω–æ—Å—Ç—ñ", ["—Ä–æ–∑–º—ñ—Ä"], 2.0, "medium"),
        ("–ü—ñ–¥—Ç—Ä–∏–º–∫–∞ Zara –∂–∞—Ö–ª–∏–≤–∞, —á–µ–∫–∞—é –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –≤–∂–µ 3 –¥–Ω—ñ", ["–ø—ñ–¥—Ç—Ä–∏–º–∫–∞"], 1.5, "high"),
        ("–ü–æ–≤–µ—Ä–Ω—É—Ç–∏ —Ç–æ–≤–∞—Ä –≤ Zara –Ω–µ–º–æ–∂–ª–∏–≤–æ, –≤—ñ–¥–º–æ–≤–∏–ª–∏ –±–µ–∑ –ø—Ä–∏—á–∏–Ω–∏", ["–ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è", "–ø—ñ–¥—Ç—Ä–∏–º–∫–∞"], 1.0, "high"),
        ("–î–æ–¥–∞—Ç–æ–∫ Zara –ª–∞–≥–∞—î —ñ –Ω–µ –∑–±–µ—Ä—ñ–≥–∞—î –º–æ—ó –¥–∞–Ω—ñ", ["–¥–æ–¥–∞—Ç–æ–∫", "–±–∞–≥–∏"], 2.0, "high"),
        ("–û–ø–ª–∞—Ç–∞ –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ –¥–æ–¥–∞—Ç–æ–∫ –≤–∂–µ —Ç–∏–∂–¥–µ–Ω—å!", ["–æ–ø–ª–∞—Ç–∞", "–¥–æ–¥–∞—Ç–æ–∫"], 1.0, "critical"),
        ("–°–ö–ê–ú! –ì—Ä–æ—à—ñ —Å–ø–∏—Å–∞–ª–∏, –∞ —Ç–æ–≤–∞—Ä –Ω–µ –≤—ñ–¥–ø—Ä–∞–≤–∏–ª–∏", ["—à–∞—Ö—Ä–∞–π—Å—Ç–≤–æ", "–æ–ø–ª–∞—Ç–∞"], 1.0, "critical"),
        ("–î–æ–¥–∞—Ç–æ–∫ –∫—Ä–∞—à–∏—Ç—å—Å—è –∫–æ–∂–Ω—ñ 5 —Ö–≤–∏–ª–∏–Ω, –Ω–µ–º–æ–∂–ª–∏–≤–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ç–∏—Å—å", ["–∫—Ä–∞—à", "–¥–æ–¥–∞—Ç–æ–∫"], 1.0, "critical"),
    ]
}

ZARA_DOCUMENTS = [
    {
        "title": "–ü—Ä–æ –±—Ä–µ–Ω–¥ Zara",
        "content": """Zara - —Ü–µ —ñ—Å–ø–∞–Ω—Å—å–∫–∏–π –±—Ä–µ–Ω–¥ —à–≤–∏–¥–∫–æ—ó –º–æ–¥–∏, —â–æ –Ω–∞–ª–µ–∂–∏—Ç—å Inditex Group. 
        –ó–∞—Å–Ω–æ–≤–∞–Ω–∏–π —É 1975 —Ä–æ—Ü—ñ –ê–º–∞–Ω—Å—ñ–æ –û—Ä—Ç–µ–≥–æ—é. Zara –≤—ñ–¥–æ–º–∞ —Å–≤–æ—ó–º –ø—ñ–¥—Ö–æ–¥–æ–º –¥–æ —à–≤–∏–¥–∫–æ—ó –º–æ–¥–∏, 
        –≤–∏–ø—É—Å–∫–∞—é—á–∏ –Ω–æ–≤—ñ –∫–æ–ª–µ–∫—Ü—ñ—ó –∫–æ–∂–Ω—ñ –¥–≤–∞ —Ç–∏–∂–Ω—ñ. –ë—Ä–µ–Ω–¥ –º–∞—î –ø–æ–Ω–∞–¥ 2000 –º–∞–≥–∞–∑–∏–Ω—ñ–≤ —É 96 –∫—Ä–∞—ó–Ω–∞—Ö —Å–≤—ñ—Ç—É.""",
        "doc_type": "brand_info"
    },
    {
        "title": "–ü–æ–ª—ñ—Ç–∏–∫–∞ –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è Zara",
        "content": """Zara –Ω–∞–¥–∞—î 30 –¥–Ω—ñ–≤ –Ω–∞ –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è —Ç–æ–≤–∞—Ä—É –∑ –º–æ–º–µ–Ω—Ç—É –ø–æ–∫—É–ø–∫–∏. 
        –¢–æ–≤–∞—Ä –ø–æ–≤–∏–Ω–µ–Ω –±—É—Ç–∏ –≤ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω—ñ–π —É–ø–∞–∫–æ–≤—Ü—ñ –∑ –±–∏—Ä–∫–∞–º–∏. –ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –º–æ–∂–ª–∏–≤–µ —è–∫ —É –º–∞–≥–∞–∑–∏–Ω—ñ, 
        —Ç–∞–∫ —ñ —á–µ—Ä–µ–∑ –∫—É—Ä'—î—Ä–∞. –ö–æ—à—Ç–∏ –ø–æ–≤–µ—Ä—Ç–∞—é—Ç—å—Å—è –ø—Ä–æ—Ç—è–≥–æ–º 14 –¥–Ω—ñ–≤ –Ω–∞ –∫–∞—Ä—Ç–∫—É –∞–±–æ —Ä–∞—Ö—É–Ω–æ–∫.""",
        "doc_type": "policy"
    },
    {
        "title": "–û–Ω–æ–≤–ª–µ–Ω–Ω—è –¥–æ–¥–∞—Ç–∫—É Zara - –í–µ—Ä—Å—ñ—è 10.5",
        "content": """–ù–æ–≤–∞ –≤–µ—Ä—Å—ñ—è –¥–æ–¥–∞—Ç–∫—É Zara (10.5) –≤–∫–ª—é—á–∞—î:
        - –ü–æ–∫—Ä–∞—â–µ–Ω—É —Å–∏—Å—Ç–µ–º—É –æ–ø–ª–∞—Ç–∏
        - –ù–æ–≤–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–∞—Ç–∞–ª–æ–≥—É
        - –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ñ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –Ω–∞ –æ—Å–Ω–æ–≤—ñ AI
        - –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ø–æ–º–∏–ª–æ–∫ –∑ –∫—Ä–∞—à–∞–º–∏ –ø—Ä–∏ –æ–ø–ª–∞—Ç—ñ
        - –î–æ–¥–∞–Ω–æ –ø—ñ–¥—Ç—Ä–∏–º–∫—É Apple Pay —Ç–∞ Google Pay
        –î–∞—Ç–∞ —Ä–µ–ª—ñ–∑—É: 15 –≤–µ—Ä–µ—Å–Ω—è 2025""",
        "doc_type": "release_notes"
    },
    {
        "title": "–ö–æ–Ω—Ç–∞–∫—Ç–∏ —Å–ª—É–∂–±–∏ –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ Zara",
        "content": """
        –°–ª—É–∂–±–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ Zara:
        - Email: support@zara.com
        - –¢–µ–ª–µ—Ñ–æ–Ω: 0-800-555-100 (–±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ –ø–æ –£–∫—Ä–∞—ó–Ω—ñ)
        - –ß–∞—Ç –≤ –¥–æ–¥–∞—Ç–∫—É: –¥–æ—Å—Ç—É–ø–Ω–∏–π 24/7
        - –ß–∞—Å —Ä–æ–±–æ—Ç–∏ —Ç–µ–ª–µ—Ñ–æ–Ω—É: –ü–Ω-–ù–¥ 9:00-21:00
        - –°–µ—Ä–µ–¥–Ω—ñ–π —á–∞—Å –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ: –¥–æ 24 –≥–æ–¥–∏–Ω
        """,
        "doc_type": "support_info"
    },
    {
        "title": "–†–æ–∑–º—ñ—Ä–Ω–∞ —Å—ñ—Ç–∫–∞ Zara",
        "content": """–†–æ–∑–º—ñ—Ä–Ω–∞ —Å—ñ—Ç–∫–∞ Zara –º–æ–∂–µ –≤—ñ–¥—Ä—ñ–∑–Ω—è—Ç–∏—Å—è –≤—ñ–¥ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏—Ö —Ä–æ–∑–º—ñ—Ä—ñ–≤.
        –†–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è –∑–∞–≤–∂–¥–∏ –ø–µ—Ä–µ–≤—ñ—Ä—è—Ç–∏ —Ç–∞–±–ª–∏—Ü—é —Ä–æ–∑–º—ñ—Ä—ñ–≤ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ—ó –º–æ–¥–µ–ª—ñ.
        XS (EU 34), S (EU 36), M (EU 38), L (EU 40), XL (EU 42).
        –ó–≤–µ—Ä–Ω—ñ—Ç—å —É–≤–∞–≥—É: –∞–∑—ñ–π—Å—å–∫—ñ —Ä–æ–∑–º—ñ—Ä–∏ –º–æ–∂—É—Ç—å –±—É—Ç–∏ –º–µ–Ω—à–∏–º–∏ –Ω–∞ 1-2 —Ä–æ–∑–º—ñ—Ä–∏.""",
        "doc_type": "sizing_guide"
    }
]

SERP_RESULTS = [
    {
        "query": "Zara Ukraine",
        "title": "ZARA Ukraine - –Ü–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω –æ–¥—è–≥—É",
        "snippet": "–û—Ñ—ñ—Ü—ñ–π–Ω–∏–π —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω ZARA –≤ –£–∫—Ä–∞—ó–Ω—ñ. –ñ—ñ–Ω–æ—á–∏–π, —á–æ–ª–æ–≤—ñ—á–∏–π —Ç–∞ –¥–∏—Ç—è—á–∏–π –æ–¥—è–≥. –ù–æ–≤—ñ –∫–æ–ª–µ–∫—Ü—ñ—ó –æ–Ω–ª–∞–π–Ω.",
        "url": "https://www.zara.com/ua/",
        "position": 1
    },
    {
        "query": "Zara reviews",
        "title": "–í—ñ–¥–≥—É–∫–∏ –ø—Ä–æ Zara - –Ω–∞–π–±—ñ–ª—å—à–∞ –∫–æ–ª–µ–∫—Ü—ñ—è –≤—ñ–¥–≥—É–∫—ñ–≤",
        "snippet": "–†–µ–∞–ª—å–Ω—ñ –≤—ñ–¥–≥—É–∫–∏ –ø–æ–∫—É–ø—Ü—ñ–≤ –ø—Ä–æ Zara. –û—Ü—ñ–Ω–∫–∞ 4.2 –∑ 5. –ß–∏—Ç–∞–π—Ç–µ —â–æ –ø–∏—à—É—Ç—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –ø—Ä–æ —è–∫—ñ—Å—Ç—å —Ç–∞ –¥–æ—Å—Ç–∞–≤–∫—É.",
        "url": "https://reviews.com.ua/zara",
        "position": 2
    },
    {
        "query": "Zara app problems",
        "title": "–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ —Å–∫–∞—Ä–∂–∞—Ç—å—Å—è –Ω–∞ –ø—Ä–æ–±–ª–µ–º–∏ –∑ –¥–æ–¥–∞—Ç–∫–æ–º Zara",
        "snippet": "–ü—ñ—Å–ª—è –æ—Å—Ç–∞–Ω–Ω—å–æ–≥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –¥–æ–¥–∞—Ç–æ–∫ Zara –ø–æ—á–∞–≤ –∫—Ä–∞—à–∏—Ç–∏—Å—è. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –ø–æ–≤—ñ–¥–æ–º–ª—è—é—Ç—å –ø—Ä–æ –ø—Ä–æ–±–ª–µ–º–∏ –∑ –æ–ø–ª–∞—Ç–æ—é.",
        "url": "https://news.tech/zara-app-issues",
        "position": 1
    },
    {
        "query": "Zara delivery Ukraine",
        "title": "–î–æ—Å—Ç–∞–≤–∫–∞ Zara –≤ –£–∫—Ä–∞—ó–Ω—ñ - —É–º–æ–≤–∏ —Ç–∞ —Ç–µ—Ä–º—ñ–Ω–∏",
        "snippet": "–ë–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∞ –¥–æ—Å—Ç–∞–≤–∫–∞ –ø—Ä–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—ñ –≤—ñ–¥ 1500 –≥—Ä–Ω. –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞ –¥–æ—Å—Ç–∞–≤–∫–∞ 3-5 –¥–Ω—ñ–≤. –ï–∫—Å–ø—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∞ - 1-2 –¥–Ω—ñ.",
        "url": "https://www.zara.com/ua/delivery",
        "position": 1
    }
]

LLM_DESCRIPTIONS = {
    "positive": [
        "–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–∏—Å–ª–æ–≤–ª—é—î –∑–∞–¥–æ–≤–æ–ª–µ–Ω–Ω—è —è–∫—ñ—Å—Ç—é –ø—Ä–æ–¥—É–∫—Ç—É",
        "–ö–ª—ñ—î–Ω—Ç —Ö–≤–∞–ª–∏—Ç—å —à–≤–∏–¥–∫—É –¥–æ—Å—Ç–∞–≤–∫—É",
        "–ü–æ–∑–∏—Ç–∏–≤–Ω–∏–π –≤—ñ–¥–≥—É–∫ –ø—Ä–æ –æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è",
        "–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á —Ä–µ–∫–æ–º–µ–Ω–¥—É—î –±—Ä–µ–Ω–¥",
        "–ó–∞–¥–æ–≤–æ–ª–µ–Ω–∏–π —Å–ø—ñ–≤–≤—ñ–¥–Ω–æ—à–µ–Ω–Ω—è–º —Ü—ñ–Ω–∏ —Ç–∞ —è–∫–æ—Å—Ç—ñ"
    ],
    "neutral": [
        "–ù–µ–π—Ç—Ä–∞–ª—å–Ω–∞ –∑–≥–∞–¥–∫–∞ –ø—Ä–æ –±—Ä–µ–Ω–¥",
        "–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –æ–ø–∏—Å—É—î –¥–æ—Å–≤—ñ–¥ –±–µ–∑ –µ–º–æ—Ü—ñ–π",
        "–ó–≤–∏—á–∞–π–Ω–∏–π –≤—ñ–¥–≥—É–∫ –ø—Ä–æ –ø–æ–∫—É–ø–∫—É",
        "–ù–µ–π—Ç—Ä–∞–ª—å–Ω–∏–π –∫–æ–º–µ–Ω—Ç–∞—Ä –ø—Ä–æ —è–∫—ñ—Å—Ç—å"
    ],
    "negative": [
        "–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á —Å–∫–∞—Ä–∂–∏—Ç—å—Å—è –Ω–∞ –∫—Ä–∞—à –¥–æ–¥–∞—Ç–∫—É –ø—Ä–∏ –æ–ø–ª–∞—Ç—ñ",
        "–ü—Ä–æ–±–ª–µ–º–∏ –∑ –¥–æ—Å—Ç–∞–≤–∫–æ—é –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è",
        "–°–∫–∞—Ä–≥–∞ –Ω–∞ –ø–æ–≥–∞–Ω—É —è–∫—ñ—Å—Ç—å —Ç–æ–≤–∞—Ä—É",
        "–ü—Ä–æ–±–ª–µ–º–∏ –∑ –æ–ø–ª–∞—Ç–æ—é –≤ –¥–æ–¥–∞—Ç–∫—É",
        "–°–∫–∞—Ä–≥–∞ –Ω–∞ –ø–æ–≤—ñ–ª—å–Ω—É –ø—ñ–¥—Ç—Ä–∏–º–∫—É",
        "–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–µ –∑–∞–¥–æ–≤–æ–ª–µ–Ω–∏–π –ø–æ—Å–ª—É–≥–æ—é –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è"
    ]
}


def generate_test_data():
    """–ì–µ–Ω–µ—Ä—É—î —Ç–µ—Å—Ç–æ–≤—ñ –¥–∞–Ω—ñ –ø—Ä–æ Zara"""
    print("üöÄ –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è —Ç–µ—Å—Ç–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö –ø—Ä–æ Zara...")
    
    # 1. –î–æ–¥–∞—î–º–æ –¥–æ–∫—É–º–µ–Ω—Ç–∏ –ø—Ä–æ –±—Ä–µ–Ω–¥
    print("\nüìÑ –î–æ–¥–∞—î–º–æ –¥–æ–∫—É–º–µ–Ω—Ç–∏ –ø—Ä–æ –±—Ä–µ–Ω–¥...")
    for doc in ZARA_DOCUMENTS:
        doc_id = db_manager.add_document(
            title=doc["title"],
            content=doc["content"],
            doc_type=doc["doc_type"]
        )
        print(f"   ‚úì –î–æ–¥–∞–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç: {doc['title']} (ID: {doc_id})")
    
    # 2. –î–æ–¥–∞—î–º–æ SERP —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏
    print("\nüîç –î–æ–¥–∞—î–º–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ Google –ø–æ—à—É–∫—É...")
    for serp in SERP_RESULTS:
        serp_data = {
            **serp,
            "timestamp": datetime.now() - timedelta(days=random.randint(0, 7))
        }
        serp_id = db_manager.add_serp_result(serp_data)
        print(f"   ‚úì –î–æ–¥–∞–Ω–æ SERP: {serp['title'][:50]}... (ID: {serp_id})")
    
    # 3. –ì–µ–Ω–µ—Ä—É—î–º–æ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ –∑ —Ä—ñ–∑–Ω–∏—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º
    print("\nüí¨ –ì–µ–Ω–µ—Ä—É—î–º–æ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ/–≤—ñ–¥–≥—É–∫–∏...")
    platforms = [Platform.APP_STORE, Platform.GOOGLE_PLAY, Platform.TRUSTPILOT, 
                 Platform.REDDIT, Platform.QUORA]
    
    total_comments = 0
    
    # –ì–µ–Ω–µ—Ä—É—î–º–æ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ –∑–∞ –æ—Å—Ç–∞–Ω–Ω—ñ 30 –¥–Ω—ñ–≤
    for day_offset in range(30):
        base_date = datetime.now() - timedelta(days=day_offset)
        
        # –†—ñ–∑–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤ –ø–æ –¥–Ω—è—Ö (—ñ–º—ñ—Ç–∞—Ü—ñ—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Ç—Ä–∞—Ñ—ñ–∫—É)
        if day_offset == 0:
            # –°—å–æ–≥–æ–¥–Ω—ñ - —Å–∏–º—É–ª—é—î–º–æ –∫—Ä–∏–∑—É (–±–∞–≥–∞—Ç–æ –Ω–µ–≥–∞—Ç–∏–≤—É –ø—Ä–æ –∫—Ä–∞—à)
            comments_count = 25
            sentiment_weights = [0.1, 0.1, 0.8]  # 80% –Ω–µ–≥–∞—Ç–∏–≤
        elif day_offset < 7:
            comments_count = random.randint(8, 15)
            sentiment_weights = [0.4, 0.2, 0.4]
        else:
            comments_count = random.randint(3, 8)
            sentiment_weights = [0.5, 0.3, 0.2]
        
        for _ in range(comments_count):
            # –í–∏–±–∏—Ä–∞—î–º–æ sentiment
            sentiment = random.choices(
                ["positive", "neutral", "negative"],
                weights=sentiment_weights
            )[0]
            
            # –í–∏–±–∏—Ä–∞—î–º–æ –∫–æ–º–µ–Ω—Ç–∞—Ä (—Ç–µ–∫—Å—Ç, –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó[], —Ä–µ–π—Ç–∏–Ω–≥, severity)
            comment_text, categories, rating, severity = random.choice(ZARA_COMMENTS[sentiment])
            
            # –î–æ–¥–∞—î–º–æ –≤–∞—Ä—ñ–∞—Ç–∏–≤–Ω—ñ—Å—Ç—å
            timestamp = base_date - timedelta(
                hours=random.randint(0, 23),
                minutes=random.randint(0, 59)
            )
            
            platform = random.choice(platforms)
            
            # –î–ª—è –∫—Ä–∏–∑–∏ —Å—å–æ–≥–æ–¥–Ω—ñ - –±—ñ–ª—å—à–µ crash –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤
            if day_offset == 0 and sentiment == "negative":
                if random.random() < 0.7:  # 70% —à–∞–Ω—Å
                    crash_comments = [
                        ("–î–æ–¥–∞—Ç–æ–∫ Zara –ø–æ—Å—Ç—ñ–π–Ω–æ –≤–∏–ª—ñ—Ç–∞—î –ø—Ä–∏ –æ–ø–ª–∞—Ç—ñ! –í–∂–µ –≤—Ç—Ä–µ—Ç—î –Ω–∞–º–∞–≥–∞—é—Å—è", ["–æ–ø–ª–∞—Ç–∞", "–∫—Ä–∞—à", "–¥–æ–¥–∞—Ç–æ–∫"], 1.0, "critical"),
                        ("–ù–µ –º–æ–∂—É –æ–ø–ª–∞—Ç–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –≤ –¥–æ–¥–∞—Ç–∫—É Zara, –ø–∏—à–µ –ø–æ–º–∏–ª–∫—É", ["–æ–ø–ª–∞—Ç–∞", "–¥–æ–¥–∞—Ç–æ–∫"], 1.0, "critical"),
                        ("–î–æ–¥–∞—Ç–æ–∫ –∫—Ä–∞—à–∏—Ç—å—Å—è –∫–æ–∂–Ω—ñ 5 —Ö–≤–∏–ª–∏–Ω, –Ω–µ–º–æ–∂–ª–∏–≤–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ç–∏—Å—å", ["–∫—Ä–∞—à", "–¥–æ–¥–∞—Ç–æ–∫"], 1.0, "critical"),
                        ("–û–ø–ª–∞—Ç–∞ –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ –¥–æ–¥–∞—Ç–æ–∫ –≤–∂–µ —Ç–∏–∂–¥–µ–Ω—å!", ["–æ–ø–ª–∞—Ç–∞", "–¥–æ–¥–∞—Ç–æ–∫"], 1.0, "critical"),
                        ("–°–ö–ê–ú! –ì—Ä–æ—à—ñ —Å–ø–∏—Å–∞–ª–∏, –∞ —Ç–æ–≤–∞—Ä –Ω–µ –≤—ñ–¥–ø—Ä–∞–≤–∏–ª–∏", ["—à–∞—Ö—Ä–∞–π—Å—Ç–≤–æ", "–æ–ø–ª–∞—Ç–∞"], 1.0, "critical")
                    ]
                    comment_text, categories, rating, severity = random.choice(crash_comments)
            
            comment_data = {
                "body": comment_text,
                "timestamp": timestamp,
                "rating": rating,
                "backlink": f"https://{platform.value}/review/{random.randint(1000, 9999)}",
                "platform": platform.value,
                "sentiment": sentiment,
                "llm_description": random.choice(LLM_DESCRIPTIONS[sentiment]),
                "category": categories,  # –¢–µ–ø–µ—Ä —Ü–µ —Å–ø–∏—Å–æ–∫
                "severity": severity  # –î–æ–¥–∞–Ω–æ severity
            }
            
            comment_id = db_manager.add_comment(comment_data)
            total_comments += 1
    
    print(f"   ‚úì –î–æ–¥–∞–Ω–æ {total_comments} –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤")
    
    # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö
    all_comments = db_manager.get_all_comments()
    platform_stats = {}
    sentiment_stats = {"positive": 0, "negative": 0, "neutral": 0}
    severity_stats = {"low": 0, "medium": 0, "high": 0, "critical": 0}
    
    for metadata in all_comments["metadatas"]:
        platform = metadata.get("platform", "unknown")
        sentiment = metadata.get("sentiment", "neutral")
        severity = metadata.get("severity", "medium")
        platform_stats[platform] = platform_stats.get(platform, 0) + 1
        sentiment_stats[sentiment] += 1
        severity_stats[severity] += 1
    
    print("\nüìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∏—Ö –¥–∞–Ω–∏—Ö:")
    print(f"   –í—Å—å–æ–≥–æ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤: {total_comments}")
    print(f"   –ü–æ–∑–∏—Ç–∏–≤–Ω–∏—Ö: {sentiment_stats['positive']}")
    print(f"   –ù–µ–π—Ç—Ä–∞–ª—å–Ω–∏—Ö: {sentiment_stats['neutral']}")
    print(f"   –ù–µ–≥–∞—Ç–∏–≤–Ω–∏—Ö: {sentiment_stats['negative']}")
    print("\n   –ü–æ severity:")
    print(f"   Low: {severity_stats['low']}")
    print(f"   Medium: {severity_stats['medium']}")
    print(f"   High: {severity_stats['high']}")
    print(f"   Critical: {severity_stats['critical']}")
    print("\n   –ü–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö:")
    for platform, count in platform_stats.items():
        print(f"   - {platform}: {count}")
    
    print("\n‚úÖ –¢–µ—Å—Ç–æ–≤—ñ –¥–∞–Ω—ñ —É—Å–ø—ñ—à–Ω–æ –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–æ!")
    print("\nüí° –¢–µ–ø–µ—Ä –º–æ–∂–Ω–∞:")
    print("   1. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–µ—Ä–≤–µ—Ä: python app/main.py")
    print("   2. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É: GET /api/statistics")
    print("   3. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∫—Ä–∏–∑—É: GET /api/crisis/check")
    print("   4. –ó–∞–ø–∏—Ç–∞—Ç–∏ –≤ —á–∞—Ç—ñ: POST /api/chat")


if __name__ == "__main__":
    generate_test_data()
